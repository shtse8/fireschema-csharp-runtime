# üî• FireSchema.CS.Runtime

[![NuGet version](https://badge.fury.io/nu/FireSchema.CS.Runtime.svg)](https://badge.fury.io/nu/FireSchema.CS.Runtime)

**Supercharge Your .NET Firestore Development with Type Safety!**

This package is the core runtime library for C# code generated by [FireSchema](https://github.com/shtse8/FireSchema), the powerful tool that enforces your Firestore schema directly in your .NET code.

## Escape the Dangers of `Dictionary<string, object>`!

Working with `Google.Cloud.Firestore` often involves:

-   Manual object-to-dictionary conversions.
-   Risk of runtime errors from typos in field names (`"UserNmae"` vs `"UserName"`).
-   Lack of compile-time validation for queries and updates.
-   Difficulty ensuring data consistency across your application.

This leads to brittle, hard-to-maintain C# code when interacting with Firestore.

## FireSchema + This Runtime = Robust & Efficient .NET Firestore Code üí™

**FireSchema** analyzes your JSON Schema definition and generates strongly-typed C# models, collection references, query builders, and update builders.

This **`FireSchema.CS.Runtime`** NuGet package provides the essential base classes (`BaseCollectionRef`, `BaseQueryBuilder`, `BaseUpdateBuilder`), interfaces, and converters (`FirestoreDataConverter`) that the generated C# code relies upon. It integrates seamlessly with the official `Google.Cloud.Firestore` SDK.

**Why Embrace This Approach?**

-   **üîí Compile-Time Confidence:** Catch data-related errors during development, not in production.
-   **üöÄ Accelerate Development:** Reduce boilerplate significantly. Leverage IntelliSense for fields, queries, and updates.
-   **‚úÖ Improve Code Quality:** Write cleaner, more maintainable, and less error-prone Firestore interactions.
-   **‚öôÔ∏è Versatile:** Ideal for ASP.NET Core backends, MAUI apps, Blazor projects, Unity games (via .NET Standard compatibility), and any .NET application using Firestore.

## Installation

This package is intended to be used with C# code generated by the `fireschema` tool. Install both this runtime and the `Google.Cloud.Firestore` SDK in your .NET project:

```bash
dotnet add package FireSchema.CS.Runtime
dotnet add package Google.Cloud.Firestore
```

## Usage

You'll primarily use the C# classes generated by the `fireschema` CLI tool, which depend on this runtime package.

**Example (using generated code):**

```csharp
using Google.Cloud.Firestore;
using YourProject.Generated.Firestore; // Adjust namespace from generated code
using YourProject.Generated.Firestore.Users; // Adjust namespace

// Your initialized FirestoreDb instance
FirestoreDb firestoreDb = FirestoreDb.Create("your-project-id");

var usersCollection = new UsersCollection(firestoreDb); // Generated class uses this runtime

async Task RunCSharp()
{
    // Type-safe Add!
    var newUser = new UsersAddData { DisplayName = "CSharp User", Email = "csharp@example.com", Age = 30 };
    var newUserRef = await usersCollection.AddAsync(newUser);
    Console.WriteLine($"Added: {newUserRef.Id}");

    // Type-safe Get!
    var fetchedUser = await usersCollection.GetAsync(newUserRef.Id);
    Console.WriteLine($"Fetched: {fetchedUser?.Data.DisplayName}"); // Access data safely

    // Type-safe Query!
    var activeUsers = await usersCollection.Query()
        .WhereIsActive(FilterOperator.EqualTo, true) // Assumes IsActive field
        .Limit(10)
        .GetDataAsync();
    Console.WriteLine($"Active Users: {activeUsers.Count}");

    // Type-safe Update!
    await usersCollection.UpdateAsync(newUserRef.Id)
        .IncrementAge(1) // Assumes Age field
        .SetLastLogin(Timestamp.GetCurrentTimestamp()) // Assumes LastLogin field
        .CommitAsync();
    Console.WriteLine($"Updated: {newUserRef.Id}");
}
```

## Ready to Define Your Schema?

This runtime package empowers your generated C# code. To learn how to define your Firestore schema using JSON Schema and generate code for C# and other platforms, dive into the main FireSchema documentation:

**‚û°Ô∏è [Full FireSchema Documentation & Guides](https://shtse8.github.io/FireSchema/)**

---

*This package provides the runtime support for the `csharp-client` target in FireSchema.*